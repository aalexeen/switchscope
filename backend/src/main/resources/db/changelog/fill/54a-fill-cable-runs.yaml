databaseChangeLog:
  - changeSet:
      id: fill-cable-runs
      author: AALEXEEN
      changes:
        - loadData:
            encoding: UTF-8
            separator: ;
            quotchar: ''''
            usePreparedStatements: false
            tableName: components
            file: ../csv/54a-cable-runs.csv
            commentLineStartsWith: //
            relativeToChangelogFile: true
            columns:
              - column: { header: id, name: id, type: UUID }
              - column: { header: name, name: name, type: VARCHAR }
              - column: { header: description, name: description, type: TEXT }
              - column: { header: component_class, name: component_class, type: VARCHAR }
              - column: { header: manufacturer, name: manufacturer, type: VARCHAR }
              - column: { header: model, name: model, type: VARCHAR }
              - column: { header: serial_number, name: serial_number, type: VARCHAR }
              - column: { header: part_number, name: part_number, type: VARCHAR }
              - column: { header: component_status_id, name: component_status_id, type: UUID }
              - column: { header: component_type_id, name: component_type_id, type: UUID }
              - column: { header: component_nature_id, name: component_nature_id, type: UUID }
              - column: { header: installation_id, name: installation_id, type: UUID }
              - column: { header: parent_component_id, name: parent_component_id, type: UUID }
              - column: { header: last_maintenance_date, name: last_maintenance_date, type: DATE }
              - column: { header: next_maintenance_date, name: next_maintenance_date, type: DATE }
              - column: { header: cable_model_id, name: cable_model_id, type: UUID }
              - column: { header: cable_length_meters, name: cable_length_meters, type: DOUBLE }
              - column: { header: cable_type, name: cable_type, type: VARCHAR }
              - column: { header: cable_category, name: cable_category, type: VARCHAR }
              - column: { header: installation_method, name: installation_method, type: VARCHAR }
              - column: { header: cable_pathway, name: cable_pathway, type: VARCHAR }
              - column: { header: tested, name: tested, type: BOOLEAN }
              - column: { header: test_date, name: test_date, type: DATE }
              - column: { header: test_result, name: test_result, type: VARCHAR }
              - column: { header: test_notes, name: test_notes, type: VARCHAR }
              - column: { header: cable_id, name: cable_id, type: VARCHAR }
              - column: { header: circuit_id, name: circuit_id, type: VARCHAR }
              - column: { header: start_location_id, name: start_location_id, type: UUID }
              - column: { header: end_location_id, name: end_location_id, type: UUID }
      rollback:
        - delete:
            tableName: components
            where: component_class = 'CABLE_RUN'


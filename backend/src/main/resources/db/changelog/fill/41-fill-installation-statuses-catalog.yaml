databaseChangeLog:
  - changeSet:
      id: fill-installation-statuses-catalog
      author: AALEXEEN
      changes:
        - loadData:
            encoding: UTF-8
            separator: ;
            quotchar: ''''
            usePreparedStatements: true
            tableName: installation_statuses_catalog
            file: ../csv/41-installation-statuses-catalog.csv
            commentLineStartsWith: //
            schemaName: public
            relativeToChangelogFile: true
            columns:
              # Base entity fields
              - column: { header: id, name: id, type: UUID }
              - column: { header: name, name: name, type: VARCHAR }
              - column: { header: description, name: description, type: TEXT }
              - column: { header: code, name: code, type: VARCHAR }
              - column: { header: display_name, name: display_name, type: VARCHAR }
              - column: { header: is_active, name: is_active, type: BOOLEAN }
              - column: { header: sort_order, name: sort_order, type: INTEGER }
              # InstallationStatus specific fields
              - column: { header: is_physically_present, name: is_physically_present, type: BOOLEAN }
              - column: { header: is_operational, name: is_operational, type: BOOLEAN }
              - column: { header: requires_attention, name: requires_attention, type: BOOLEAN }
              - column: { header: is_final_status, name: is_final_status, type: BOOLEAN }
              - column: { header: is_error_status, name: is_error_status, type: BOOLEAN }
              - column: { header: color_category, name: color_category, type: VARCHAR }
              - column: { header: icon_class, name: icon_class, type: VARCHAR }
              - column: { header: status_order, name: status_order, type: INTEGER }
              - column: { header: auto_transition_minutes, name: auto_transition_minutes, type: INTEGER }
              - column: { header: allows_equipment_operation, name: allows_equipment_operation, type: BOOLEAN }
              - column: { header: allows_maintenance, name: allows_maintenance, type: BOOLEAN }
              - column: { header: requires_documentation, name: requires_documentation, type: BOOLEAN }
              - column: { header: notifies_stakeholders, name: notifies_stakeholders, type: BOOLEAN }
      rollback:
        - delete:
            tableName: installation_statuses_catalog

  - changeSet:
      id: fill-installation-status-transitions
      author: AALEXEEN
      changes:
        - loadData:
            encoding: UTF-8
            separator: ;
            quotchar: ''''
            usePreparedStatements: true
            tableName: installation_status_transitions
            file: ../csv/41-installation-status-transitions.csv
            commentLineStartsWith: //
            schemaName: public
            relativeToChangelogFile: true
            columns:
              - column: { header: from_status_id, name: from_status_id, type: UUID }
              - column: { header: to_status_id, name: to_status_id, type: UUID }
      rollback:
        - delete:
            tableName: installation_status_transitions


